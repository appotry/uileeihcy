 未实现：

 17.CMainFrame::OnMenuSave只实现了保存所有的文件，没有实现保存当前文件
 18.使用快捷键资源来实现快捷键 ctrl+s save 
 19.style 编辑器不应该可以编辑继续得到的属性，也无法保存继续得到的属性问题
 

71. Windowless richedit：字体定义，滚动条显示，拖拽文字，只读模式，插入图片，GIF

73. 点击打开一个系统COMBOOX的下拉列表，然后将鼠标放在一个UI控件上面，点击一下，下拉列表消失，再继续点击UI控件，无反应。
    因为没有人去触发一个WM_MOUSEMOVE来set hover对象
    
78. 将layout.xml增加一个<#include>标签，允许将一些资源抽取出来 
11. xml文件可否考虑分开，而不是全放在一个文件中？

89. 普通窗口拉伸优化！不平滑

95. 逐步将句柄调用方式修改为接口调用方法
107.ccaret的分层窗口光标在第一行/最后一行显示不下的时候，位置不正确
109.richedit的横向滚动条range、page与ui控件不同步

123.mwa,wav文件的directsound支持
    已基本支持，但是WAVE文件非PCM格式的问题  5.1声道 C:\Program Files\Microsoft DirectX SDK (March 2009)\Samples\Media\Wavs\MusicSurround.wav
    
125.在分层窗口隐藏的时候，setwindowpos，然后再showwindow，会先显示旧的内容，然后刷新为新的内容 
	提取出虚函数CustomWindow::OnDrawWindow，在里面不判断窗口的visible属性。继续观察..
	
126.COMBOBOX_STYLE_DROPDOW类型，在改变当前选项后，设置EDIT text时，出现一次乱码。而且鼠标位置没有重新计算

128.将wma音乐文件的后缀名改成.mp3后，播放失败。但千千静音能够正常播放
    判断文件格式的方法太土了。而且directshow也无法识别出来，直接renderfile报错
    // 每一个WMA文件，它的头16个字节是固定的，为十六进制的“30 26 B2 75 8E 66 CF 11 A6 D9 00 AA 00 62 CE 6C”，用来标识这个是否为WMA文件。
    
129.控件的动画效果，如按钮的状态渐变，进度条的渐变
130.SliderCtrlBase其它方向的绘制
131.立体声、单声道界面显示，剩余时间的显示
    注意，有一个5.1声道的wav文件.. 。--> 这个问题牵扯到如何读取一个文件的标签属性的问题。

138.listctrl 的 ctrl+a, delete快捷键
    
143.均衡器没有实现。目前用的是IIR的基于时域的算法。而其它播放器都是用基本频域的10波段均衡器
144.梦幻星空频谱图是如何实现的？
145.频谱图的FFT结果放大系统究竟该怎么调才对？
146.使用ThemeTooltip后，再换肤。退出时font release崩溃了。应该是没有reset attr的原因吧。到时候查一下。
147.WMA的停止后再播放有问题。SetRange (0)之后，再pushbuffer(0,xxx)，结果WMAFile GetNextSample得到的值并不是0.是因为异步READER导致的吗？	

151.d2d bitmap drawbitmap 的disable处理

153.在_OnPaint中返回0，会导致dialog类型的窗口，被其它窗口覆盖后移出来刷新异常!!!
    暂时修改为返回1

155.D2D的HLS改变    
	
157.gif优化。1.大图片解码速度问题  2. 每个GIF占用的GDI还是偏多，IE中即使增加N个显示，GDI数量也不变
    richedit中的gif，不显示后仍然在刷新。而且一个GIF的刷新，也得重新绘制整个区域，导致效率下降
	
158. 延迟创建双缓存，会导致分层窗口在改变大小时，窗口形状也延迟更新
     分层窗口的限制帧数机制未完善，导致窗口刷新不正确    
     	     
162. 灰度图的绘制效率需要再研究下 2012.11.29
     每次绘制时都会去创建一次灰度图

164. 滚动条代码优化！太绕了 2012.11.30  
     2012.12.19: 23:32 滚动条代码已作少许清理，将一个CPP分成3个CPP处理。
     
     另外PopupWindow的 Destroy 流程也很绕，需要再看看能不能优化。

165. 可以考虑为modify alpha的image增加一个属性，modifyalpharect，只对该区域中的alpha进行调整 2012.12.01

170. 20121213.14:28 BUTTON的FOCUS可以再增加一个类型，使用一张图片高亮显示，如QQ的光晕效果。
     20130110 13:42 将focus也实现为focusrender

174. 20121215 14:50 带动画图标的复合按钮控件 -- 优先级稍低些

176. 20121220 16:54 打开COptionWindow进行换肤有问题。另外listctrl类型的控件在换肤后能update item rect吗？WindowPosChanged、OnSize会自动处理吗

178. 20121225 12:41 listbox ::ShowWindow(m_pPopupWrapWnd->m_hWnd, SW_SHOWNA);必须放在setwindowpos前面吗
     20121227 9:27 放在后面依然会导致黑一次
     
179. 20121227 9:27 在win7 32位下面，右击弹出菜单后，直接关闭窗口会崩溃，64位下面不会，查查什么原因。同时尽量优化下popupcontrol的消息流程
     
181. 20121227 23:21 font modify的注册机制不好，因为中途还可能调用Object.SetTextRender怎么办？

182. 20130104 21:52 树控件的分层窗口下面的绘制.ExtCreatePen

183. 20130106 23:43 setcursor能否放在onmousemove中进行？而不是放在系统消息的setcursor中

184. 20130108 14:28 listctrlbase 的focus item逻辑，拖拽滚动的逻辑，连续两个SELECTED ITEM之间横线互融合的问题

185. 20130116 16:19 为headctrl增加min max width限制 

187. 20130118 15:38 uiapplication 中的log 对象应该是每一个UI有自己的log对象，而不是共用。看看怎么改进吧。

192. 20130216 20:20 动画，阴影的相关知识：3D游戏编程大师技巧.pdf

194. 20130220 20:14 PopupListBoxMouseMgr::OnMouseMove,整理这两个onmousemove，最好是合并为一个
     20130221 10:17 重新整理listctrl类的消息流程，控件太多，流程处理太混乱了
     
196. 20130301 9:05 mp3扩展id3v2  mp3时间读取 mp3图片读取

198. 20130305 15:03 mp3播放时突然停止，然后播放下一曲的问题没有解决，又出现了

197. 20130302 12:51 研究下这个新API：

http://www.codeproject.com/Articles/42529/Outline-Text


#if (_WIN32_WINNT >= 0x0501)
	int DrawShadowText(LPCWSTR lpstrText, int cchText, LPRECT lpRect, DWORD dwFlags, COLORREF clrText, COLORREF clrShadow, int xOffset, int yOffset)
	{
		ATLASSERT(m_hDC != NULL);
		// This function is present only if comctl32.dll version 6 is loaded;
		// we use LoadLibrary/GetProcAddress to allow apps compiled with
		// _WIN32_WINNT >= 0x0501 to run on older Windows/CommCtrl
		int nRet = 0;
		HMODULE hCommCtrlDLL = ::LoadLibrary(_T("comctl32.dll"));
		ATLASSERT(hCommCtrlDLL != NULL);
		if(hCommCtrlDLL != NULL)
		{
			typedef int (WINAPI *PFN_DrawShadowText)(HDC hDC, LPCWSTR lpstrText, UINT cchText, LPRECT lpRect, DWORD dwFlags, COLORREF clrText, COLORREF clrShadow, int xOffset, int yOffset);
			PFN_DrawShadowText pfnDrawShadowText = (PFN_DrawShadowText)::GetProcAddress(hCommCtrlDLL, "DrawShadowText");
			ATLASSERT(pfnDrawShadowText != NULL);   // this function requires CommCtrl6
			if(pfnDrawShadowText != NULL)
				nRet = pfnDrawShadowText(m_hDC, lpstrText, cchText, lpRect, dwFlags, clrText, clrShadow, xOffset, yOffset);
			::FreeLibrary(hCommCtrlDLL);
		}
		return nRet;
	}
#endif // (_WIN32_WINNT >= 0x0501)

void DrawDragRect(LPCRECT lpRect, SIZE size, LPCRECT lpRectLast, SIZE sizeLast, HBRUSH hBrush = NULL, HBRUSH hBrushLast = NULL)
	{
		// first, determine the update region and select it
		CRgn rgnOutside;
		rgnOutside.CreateRectRgnIndirect(lpRect);
		RECT rect = *lpRect;
		::InflateRect(&rect, -size.cx, -size.cy);
		::IntersectRect(&rect, &rect, lpRect);
		CRgn rgnInside;
		rgnInside.CreateRectRgnIndirect(&rect);
		CRgn rgnNew;
		rgnNew.CreateRectRgn(0, 0, 0, 0);
		rgnNew.CombineRgn(rgnOutside, rgnInside, RGN_XOR);

		HBRUSH hBrushOld = NULL;
		CBrush brushHalftone;
		if(hBrush == NULL)
			brushHalftone = hBrush = CDCHandle::GetHalftoneBrush();
		if(hBrushLast == NULL)
			hBrushLast = hBrush;

		CRgn rgnLast;
		CRgn rgnUpdate;
		if(lpRectLast != NULL)
		{
			// find difference between new region and old region
			rgnLast.CreateRectRgn(0, 0, 0, 0);
			rgnOutside.SetRectRgn(lpRectLast->left, lpRectLast->top, lpRectLast->right, lpRectLast->bottom);
			rect = *lpRectLast;
			::InflateRect(&rect, -sizeLast.cx, -sizeLast.cy);
			::IntersectRect(&rect, &rect, lpRectLast);
			rgnInside.SetRectRgn(rect.left, rect.top, rect.right, rect.bottom);
			rgnLast.CombineRgn(rgnOutside, rgnInside, RGN_XOR);

			// only diff them if brushes are the same
			if(hBrush == hBrushLast)
			{
				rgnUpdate.CreateRectRgn(0, 0, 0, 0);
				rgnUpdate.CombineRgn(rgnLast, rgnNew, RGN_XOR);
			}
		}
		if(hBrush != hBrushLast && lpRectLast != NULL)
		{
			// brushes are different -- erase old region first
			SelectClipRgn(rgnLast);
			GetClipBox(&rect);
			hBrushOld = SelectBrush(hBrushLast);
			PatBlt(rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top, PATINVERT);
			SelectBrush(hBrushOld);
			hBrushOld = NULL;
		}

		// draw into the update/new region
		SelectClipRgn(rgnUpdate.IsNull() ? rgnNew : rgnUpdate);
		GetClipBox(&rect);
		hBrushOld = SelectBrush(hBrush);
		PatBlt(rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top, PATINVERT);

		// cleanup DC
		if(hBrushOld != NULL)
			SelectBrush(hBrushOld);
		SelectClipRgn(NULL);
	}
	
199. 千千静听的示波频谱的渐变是如何实现的？Gdiplus Smooth?
     2013.4.27 搞了一天没搞出来	
     2013.8.1  高斯模糊

200. 2013.4.28 listctrl中的内部按钮如何通知mousemgr,keyboardmgr自己销毁了     

201. 2013.5.8 20:52 如何实现TabCtrl的系统类型绘制？
	  1. 保持当前选项置顶。2. 其它项刷新时不影响当前项置顶
	 2013.6.8 这种类型的还是采用完全自绘，而不是控件模拟的方式

204. 2013.6.10 16：43 listctrl中的item如何支持动态换肤？
     如果对item也调用reset/set attr的话将导致效率太低。目前的考虑是对ITEM不支持换肤，ITEM尽量去引用
     listctrlbase或者itemtypesharedata中的数据，这两个支持换肤
     
205. 2013.6.10 17:02 将button中的bchecked使用 OSB_CHECKED 代替     

206. 2013.6.12 1:13 出现一次提示条崩溃的问题。应该是menu item已经销毁了，但定时器还是给它发消息，导致野指针崩溃。未能复现

207. 2013.6.12 9:57 listitembase可以调用setattribute，那么如何实现它的换肤？

208. 2013.6.16 21:50 UI_WM_STATECHANGING是否有必要，是否影响效率 
     todo: 改成使用UI_WM_STATECHANGING2，然后在setpress/sethover时发送，这样代码逻辑更清晰。如果需要发送多个状态变化，则调用sethover(xx, false)，然后
           手动调用一次UISendMessage
     
210. 2013.6.19 1150 绘制流程还是很烂，尤其是列表控件的绘制流程，看看能不能再优化                

211. 2013.7.10 22:52 将一个只会触发一次的消息的msgmapid改为-10，这样应该就能加快消息响应的速度了,
     如UI_WM_INITIALIZE, UI_WM_PRECREATEWINDOW, UI_WM_FINALCREATE等等

214. 2013.7.20 布局与位置之间的相互转换 --- splitterbar     
     2013.7.30 canvas布局转换完成     

216. 2013.8.19 22:44 Player 在打开OptionDlg和视觉效果combobox下拉列表后换肤出现崩溃。资源又出问题了，对于不换肤的窗口     
217. 2013.8.20 11:51 Player let's seven 的皮肤播放列表拖拽窗口大小时圆角有问题
218. 2013.11.02 18:45 zip皮肤格式下面ico无法显示