jameshooo:

VISTA/WIN7的毛玻璃效果可是跟SetLayeredWindowAttributes/UpdateLayeredWindow毫无关系的，
它只跟DWM相关，并以桌面主题的方式提供，任何一个具有边框的普通窗口都自动具备毛玻璃效果。

一旦DWM激活，整个桌面就是一个全屏的3D窗口，所有应用程序的窗口DC不再是真正的屏幕DC，
而是一个3D纹理表面（这一点微软有文章介绍，跟DC相关的API都被重写了，一旦DWM激活，获取的
窗口DC被重定向到一个D3D表面，GDI绘制的所有内容都是动态纹理的一部分），整个桌面中的所有
窗口就是由这些纹理贴图而成，窗口内容的变化也被捕获以便DWM重新渲染。这种做法的好处是：
VISTA下的ALT-TAB进行3D窗口切换效果很容易实现；窗口缩略图的内容能跟原始窗口内容实时同
步。这些特性在GDI时代是无法实现的。

SetLayeredWindowAttributes/UpdateLayeredWindow跟3D没有关系，是纯软件方式实现的，仅仅是
把窗口当作一个有ALPHA通道的图层来处理，它利用窗口的Z序，桌面会正确地把普通窗口和这些图
层混合渲染。为了效率，分层窗口被约束成必须是一个静态的图片，或者拥有固定的ALPHA值，桌
面渲染这些图层的效率达到了极致，纯软件混合的速度几乎赶上了硬件。但限制也是很强的，跟渲
染相关的窗口消息被禁止了，保留的是鼠标、键盘、命中测试等低功耗消息。